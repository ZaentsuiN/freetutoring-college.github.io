<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Accessible Tabs Example</title>
  <style>
    /* Just some minimal styling so it doesn't look awful */
    body { font-family: sans-serif; }
    [role="tablist"] {
      display: flex;
      gap: 4px;
      border-bottom: 1px solid #ccc;
    }
    [role="tab"] {
      padding: 8px 16px;
      border: none;
      background: #f0f0f0;
      cursor: pointer;
      border-bottom: 2px solid transparent;
    }
    [role="tab"][aria-selected="true"] {
      background: #fff;
      border-bottom-color: blue;
    }
    [role="tabpanel"] {
      padding: 16px;
      border: 1px solid #ddd;
      margin-top: 8px;
    }
    iframe {
      width: 100%;
      height: 300px;
      border: 1px solid #ccc;
    }
    .gradio-mockup {
      width: 100%;
      height: 300px;
      background: linear-gradient(to bottom, #eee, #fff);
      display: flex;
      justify-content: center;
      align-items: center;
      border: 1px solid #ccc;
    }
	:root {
            --bg-color: #ffffff;
            --text-color: #333333;
            --primary-color: #4a6fa5;
            --secondary-color: #ff7e5f;
            --section1-color: #e6f7ff;
            --section2-color: #fff5e6;
        }

        [data-theme="dark"] {
            --bg-color: #1a1a1a;
            --text-color: #f0f0f0;
            --primary-color: #6b9bcf;
            --secondary-color: #ff9f7f;
            --section1-color: #00334d;
            --section2-color: #332100;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        h1 {
            color: var(--primary-color);
            margin: 0;
        } 

        .theme-toggle {
            background: var(--secondary-color);
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            transition: transform 0.2s;
        }

        .theme-toggle:hover {
            transform: scale(1.05);
        }

        .section {
            padding: 60px 0;
            margin: 30px 0;
            border-radius: 15px;
            transition: background-color 0.3s;
        }

        .section-1 {
            background-color: var(--section1-color);
        }

        .section-2 {
            background-color: var(--section2-color);
        }

        .section-title {
            color: var(--primary-color);
            margin-top: 0;
        }

        .section-content {
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .section {
                padding: 40px 20px;
            }
        }
        
  </style>
</head>
<body>

<!-- The Tab List -->
<div role="tablist" aria-label="Main navigation tabs">
  <button id="chat-tab" 
          role="tab" 
          aria-selected="true" 
          aria-controls="chat-panel"
          class="tab-button">
    üí¨ Chat
  </button>
  <button id="iframe-tab" 
          role="tab" 
          aria-selected="false" 
          aria-controls="iframe-panel"
          class="tab-button">
    üåê Iframe Example
  </button>
  <button id="gradio-tab" 
          role="tab" 
          aria-selected="false" 
          aria-controls="gradio-panel"
          class="tab-button">
    ü§ñ Gradio App
  </button>
  <button id="disabled-tab" 
          role="tab" 
          aria-selected="false" 
          aria-disabled="true"
          aria-controls="disabled-panel"
          disabled
          class="tab-button">
    üö´ Disabled Tab
  </button>
</div>

<!-- The Tab Panels -->
<div id="chat-panel" role="tabpanel" aria-labelledby="chat-tab">
  <h2>Chat Panel</h2>
  <button class="theme-toggle" id="themeToggle">Dark Mode</button>
  <p>This is the chat interface. Type your messages here... 
<h1>Accessible Tabs Demo</h1> </p>
  <textarea rows="5" cols="40" placeholder="Type a message..."></textarea>
</div>

<div id="iframe-panel" role="tabpanel" aria-labelledby="iframe-tab" hidden>
  <h2>Iframe Example</h2>
  <p>This tab contains a resizable iframe:</p>
  <iframe id="myIframe" src="https://example.com" frameborder="0"></iframe>
  <!-- iframe-resizer contentWindow script goes INSIDE the iframe, 
       but for demo purposes we'll just put it here so you see it -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/4.3.1/iframeResizer.contentWindow.min.js"></script>
</div>

<div id="gradio-panel" role="tabpanel" aria-labelledby="gradio-tab" hidden>
  <h2>Gradio App Mockup</h2>
  <p>This tab would normally contain a live Gradio app (ML interface), but since that needs a Python backend, here's a static mockup:</p>
  <div class="gradio-mockup">
    <img src="https://picsum.photos/500/350" alt="Mock Gradio interface">
  </div>
  <!-- Real Gradio would load its JS here -->
  <script>/* In real life: <script src="https://gradio.s3-us-west-2.amazonaws.com/.../gradio.js"></script></script>
</div>

<div id="disabled-panel" role="tabpanel" aria-labelledby="disabled-tab" hidden>
  <h2>Disabled Tab (should never see this)</h2>
  <p>This content is never shown because the tab is disabled.</p>
</div>

<script>
  // JavaScript to make tabs work
  const tablist = document.querySelector('[role="tablist"]');
  const tabs = tablist.querySelectorAll('[role="tab"]');
  const tabPanels = document.querySelectorAll('[role="tabpanel"]');

  // Tab click handler
  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      if (tab.getAttribute('aria-disabled') === 'true') return; // ignore disabled tabs
      activateTab(tab);
    });
  });

  // Keyboard navigation (arrow keys)
  tablist.addEventListener('keydown', (e) => {
    let newTab;
    if (e.key === 'ArrowRight') {
      newTab = Array.from(tabs).find(t => t.tabIndex === (getCurrentTabIndex() + 1)) || tabs[0];
    } else if (e.key === 'ArrowLeft') {
      newTab = Array.from(tabs).find(t => t.tabIndex === (getCurrentTabIndex() - 1)) || tabs[tabs.length - 1];
    }
    if (newTab && newTab.getAttribute('aria-disabled') !== 'true') {
      activateTab(newTab);
      newTab.focus();
    }
  });

  function getCurrentTabIndex() {
    return Array.from(tabs).findIndex(tab => tab.getAttribute('aria-selected') === 'true');
  }

  function activateTab(newTab) {
    // Update tab states
    tabs.forEach(tab => tab.setAttribute('aria-selected', tab === newTab ? 'true' : 'false'));
    // Show/hide panels
    tabPanels.forEach(panel => {
      panel.hidden = (panel.id !== newTab.getAttribute('aria-controls'));
    });
  }

  // Initialize iframe-resizer (this goes on the PARENT page, not inside iframe)
  const myIframe = document.getElementById('myIframe');
  if (myIframe) {
    iFrameResize({ log: true }, myIframe);
  }
</script>
<script>
        const themeToggle = document.getElementById('themeToggle');
        const htmlElement = document.documentElement;
        let isDarkMode = false; 

        // Check for saved theme preference or use system preference
        const savedTheme = localStorage.getItem('theme');
        const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (savedTheme === 'dark' || (!savedTheme && systemPrefersDark)) {
            setDarkMode(true);
        }

        themeToggle.addEventListener('click', () => {
            isDarkMode = !isDarkMode;
            setDarkMode(isDarkMode);
        });

        function setDarkMode(darkMode) {
            if (darkMode) {
                htmlElement.setAttribute('data-theme', 'dark');
                themeToggle.textContent = 'Light Mode';
                localStorage.setItem('theme', 'dark');
            } else {
                htmlElement.removeAttribute('data-theme');
                themeToggle.textContent = 'Dark Mode';
                localStorage.setItem('theme', 'light');
            }
            isDarkMode = darkMode;
        }
    </script>
</body>
</html>
